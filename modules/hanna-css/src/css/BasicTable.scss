/*!@deps
	Footnote
*/

@use '_globals' as *;

@media screen {
  .TableWrapper {
    @include SeenEffect--fadeup();
    // @deprecated  Remove this mixin in v0.9
    @include SeenEffect--disallowNesting();
    position: relative;
    overflow-x: auto;

    --BasicTable--width: auto; // auto causes calc() to fail and implicitly revert to "auto"
    --BasicTable--margin-left: 0px;
    --BasicTable--pad-left: 0px;
    --BasicTable--pad-right: 0px;

    width: calc(
      var(--BasicTable--width) + var(--BasicTable--pad-left) +
        var(--BasicTable--pad-right)
    );
    margin-left: calc(var(--BasicTable--margin-left) - var(--BasicTable--pad-left));
    margin-right: calc(0px - var(--BasicTable--pad-right));

    @include media($mq-phone_tablet) {
      --BasicTable--pad-left: #{$var--grid-margin};
      --BasicTable--pad-right: #{$var--grid-margin--right};
    }
  }

  .TableWrapper--BasicTable--fullwidth .BasicTable,
  .TableWrapper--BasicTable--align--right .BasicTable {
    width: 100%;
  }

  @include media($mq-tablet_up) {
    .TableWrapper--BasicTable--align--right {
      --BasicTable--margin-left: #{$var--grid-5-5};
      --BasicTable--width: #{$var--grid-7};
    }
    .TextBlock--labelled .TableWrapper--BasicTable--align--right,
    .TextBlock--align--right .TableWrapper--BasicTable--align--right,
    .LabeledTextBlock--wide .TableWrapper--BasicTable--align--right {
      --BasicTable--margin-left: 0px;
    }

    .TableWrapper--BasicTable--fullwidth {
      --BasicTable--width: #{$var--grid-12};
    }
    .TextBlock--labelled .TableWrapper--BasicTable--fullwidth,
    .TextBlock--align--right .TableWrapper--BasicTable--fullwidth,
    .LabeledTextBlock--wide .TableWrapper--BasicTable--fullwidth {
      --BasicTable--margin-left: calc(-1 * #{$var--grid-5-5});
    }
    .LabeledTextBlock .TableWrapper--BasicTable--fullwidth {
      --BasicTable--margin-left: calc(-1 * #{$var--grid-6-6});
    }
  }

  .TableWrapper > table,
  .TableWrapper > * > table {
    margin: 0;
  }

  .TableWrapper--at::before,
  .TableWrapper--at::after {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    width: $var--space-3;
    background-image: linear-gradient(
      90deg,
      rgba(black, 0.12) 0,
      rgba(black, 0.05) 50%,
      transparent 100%
    );
    pointer-events: none;
    transition: opacity 200ms ease-in;
  }
  .TableWrapper--at::after {
    left: auto;
    right: 0;
    transform: scaleX(-1);
  }

  .TableWrapper--at--start::before {
    // content: none
    opacity: 0;
  }
  .TableWrapper--at--end::after {
    // content: none
    opacity: 0;
  }
  .TableWrapper__scroller {
    overflow-x: auto;
    padding-left: var(--BasicTable--pad-left);
    padding-right: var(--BasicTable--pad-right);
  }

  .TableWrapper--BasicTable--align--right.TableWrapper--BasicTable--fullwidth {
    @include WARNING__('--align-right and --fullwidth should not be used together');
  }
}

// ===========================================================================

// Drupal specific additions. Consider removing in future version
.TableWrapper__footnote div:before {
  content: '';
  display: inline-block;
  width: 4px;
  height: 18px;
  position: relative;
  margin-right: 24px;
  transform: translateY(4px);
  background-color: $var--color-suld-150;
}
.TableWrapper__footnote div {
  color: $var--color-suld-150;
}

@include media($mq-tablet_up) {
  .paragraph-alignment-right .TableWrapper__footnote {
    margin-left: auto;
    width: $var--grid-7;
  }
}

// ===========================================================================

@function _between($from, $to) {
  @return between($from, $to, $bp-phone, $grid-contentMaxWidth, '%');
}

@media screen {
  .BasicTable,
  .TableWrapper--BasicTable {
    margin-bottom: prem(30);
  }

  .BasicTable {
    @media #{$mq-phone_phablet} {
      width: 100%;
    }
  }

  .BasicTable > * > * > th,
  .BasicTable > * > * > td {
    padding: _between(12, 24) _between(16, 30);
    text-align: left;
    vertical-align: center;

    &:first-child {
      padding-left: 0;
    }
    &:last-child {
      padding-right: prem(12);
    }

    @media #{$mq-wide} {
      padding: prem(24);
    }
  }
  .BasicTable > thead > * > th {
    padding-bottom: _between(8, 18);

    @media #{$mq-wide} {
      padding-bottom: prem(18);
    }
  }

  .BasicTable--compact > * > * > th,
  .BasicTable--compact > * > * > td {
    padding: _between(6, 12);

    @media #{$mq-wide} {
      padding: prem(12);
    }
  }
  .BasicTable--compact > thead > * > th {
    padding-bottom: _between(4, 8);

    @media #{$mq-wide} {
      padding-bottom: prem(8);
    }
  }

  .BasicTable > tfoot > * > th,
  .BasicTable > tfoot > * > td {
    border-top: 2px solid $var--color-suld-100;
    border-bottom: 0;
    font-weight: $font-weight--bold;
  }

  // ---------------------------------------------------------------------------

  .BasicTable > * > * > .Cell--number {
    text-align: right;
    white-space: nowrap;
  }
  .BasicTable > * > * > .Cell--tel {
    text-align: left;
    white-space: normal;
  }
  .BasicTable > * > * > .Cell--text {
    text-align: left;
    white-space: normal;
  }
  .BasicTable > * > * > .Cell--text--right {
    text-align: right;
    white-space: normal;
  }
  .BasicTable > * > * > .Cell--text--center {
    text-align: center;
    white-space: normal;
  }
}
